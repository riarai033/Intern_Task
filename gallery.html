<!DOCTYPE html>
<html lang="en">
<head>

<!-- Google Tag Manager -->
<script>
(function(w,d,s,l,i){
w[l]=w[l]||[];
w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
j.async=true;
j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TVZRPNM6');
</script>
<!-- End Google Tag Manager -->

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Gallery - My Simple Site</title>

<style>
body{
  font-family: Arial;
  margin:0;
}

header,footer{
  padding:12px 16px;
  background:#f2f2f2;
}

.grid{
  display:flex;
  flex-wrap:wrap;
  gap:16px;
  padding:12px;
}

.product{
  width:calc(33% - 16px);
  border:1px solid #ddd;
  padding:10px;
  background:#fff;
}

.product img{
  width:100%;
  margin-bottom:8px;
}

.price{
  font-weight:bold;
  margin:6px 0;
}

.qty{
  width:60px;
}

button{
  margin-top:8px;
  padding:6px 10px;
  cursor:pointer;
}

.checkout{
  background:#000;
  color:#fff;
  padding:10px 16px;
  margin:16px;
}
</style>

</head>
<body>

<!-- Google Tag Manager (noscript) -->
<noscript>
<iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TVZRPNM6"
height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>

<header>
<h1 style="margin:0">Gallery</h1>
<nav style="margin-top:6px">
<a href="index.html">Home</a>
</nav>
</header>

<main>

<div class="grid">

  <!-- PRODUCT -->
  <div class="product">
    <img src="download.jpg" alt="Product 1">

    <div class="price">₹499</div>

    Quantity:
    <input type="number" class="qty" value="1" min="1">

    <br>

    <button onclick="addToCart('Product 1', 499, this)">
      Add to Cart
    </button>
  </div>
  <!-- PRODUCT 2 -->
  <div class="product">
    <img src="download (1).jpg" alt="Product 2">

    <div class="price">₹599</div>

    Quantity:
    <input type="number" class="qty" value="1" min="1">

    <br>

    <button onclick="addToCart('Product 2', 499, this)">
      Add to Cart
    </button>
  </div>
<!-- PRODUCT 3-->
  <div class="product">
    <img src="download (2).jpg" alt="Product 3">

    <div class="price">₹499</div>

    Quantity:
    <input type="number" class="qty" value="1" min="1">

    <br>

    <button onclick="addToCart('Product 3', 1499, this)">
      Add to Cart
    </button>
  </div>
</div>

<!-- CHECKOUT BUTTON -->
<button class="checkout" onclick="checkout()">
  Proceed to Checkout
</button>

</main>

<footer>© My Site</footer>

<script>
let cartTotal = 0;

function addToCart(productName, price, btn){
  let qty = parseInt(btn.parentElement.querySelector('.qty').value);
  let total = price * qty;

  cartTotal += total;

  alert(
    productName + " added to cart\n" +
    "Quantity: " + qty + "\n" +
    "Item Total: ₹" + total
  );

  // GA4 / GTM event
  dataLayer.push({
    event: "add_to_cart",
    product_name: productName,
    price: price,
    quantity: qty,
    value: total
  });
}

function checkout(){
  if(cartTotal === 0){
    alert("Your cart is empty");
    return;
  }

  alert("Checkout successful!\nTotal Amount: ₹" + cartTotal);

  // GA4 Checkout Event
  dataLayer.push({
    event: "begin_checkout",
    value: cartTotal
  });

  cartTotal = 0;
}
</script>

</body>
</html>
